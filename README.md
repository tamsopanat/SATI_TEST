
# การแปลงผลวินิจฉัยแพทย์เป็น ICD10

จากลักษณะของข้อมูล dataset.tsv จะสามารถกำหนดการสร้างแบบจำลองออกมาได้ว่า ใช้ผลการวินัจฉัยของแพทย์ที่เป็นประโยคภาษาอังกฤษ ทำนายออกมาเป็นรหัส ICD10

## แนวคิดในการแก้ปัญหา
### 1. การเปรียบเทียบจำนวนคำในผลวินิจฉัยที่ตรงกับ คำอธิบายรหัส ICD10 มากที่สุด
- จากข้อมูลใน icd10_choose.json ที่ประกอบไปด้วยรหัส ICD10 กับคำอธิบายรหัส สามารถนำคำอธิบายนั้นมาแยกออกเป็นคำๆ ได้ และตรวจสอบผลวินิจฉัยว่า มีคำที่ปรากฏในคำอธิบายรหัส ICD10 ใดมากที่สุด 


### 2. การสร้างแบบจำลองสำหรับ Text Classification โดยมีผลเฉลยเป็นรหัส ICD10
- fastText เป็นแบบจำลองสำหรับการทำ Text Classification ซึ่งสามารถใช้งานได้อย่างง่ายดายโดยการ import library ใน python มาใช้ได้เลย 
- การจะใช้งาน fastText นั้นจะต้องแปลงข้อมูลให้อยู่ในรูปแบบ txt โดยมีหน้าตาดังนี้ "ผลวินิจฉัย \_\_label\_\_รหัสICD10"
- แบ่งข้อมูลออกเป็น 2 ชุด ได้แก่ Training set กับ Test set โดยจะใช้ Training set ในการสร้างแบบจำลอง และใช้ Test set ในการวัดประสิทธิภาพของแบบจำลอง
- ปรับพารามิเตอร์ของแบบจำลอง และส่งข้อมูลให้ fastText เรียนรู้
- จากการวัดประสิทธิภาพของแบบจำลองกับข้อมูล Test set จะได้ค่า Accuracy เท่ากับ 84%



## ในแบบทดสอบนี้เลือกทำ fastText
### วิธีใช้งานกับ secret validation set
1. ใช้งานในไฟล์ 3_validation_test.ipynb และข้อมูลนำเข้าจะต้องมีลักษณะเหมือนกับ dataset.tsv
2. กำหนด path ของข้อมูล
3. ทำนายผล และได้รับผลออกมาเป็น DataFrame ที่แสดงข้อมูลผลวินิจฉัย และผลการทำนาย ICD10

## Deploy Python ด้วย Flask REST API
1. ใช้งานโดยการพิมพ์ต่อหลัง url ด้วย /predict/คำวินิจฉัย
2. จะแสดงออกมาในรูปแบบ Dictionary มี Key เป็น Term และ ICD10Predict ดังภาพตัวอย่างในไฟล์ชื่อ Result_Example.png